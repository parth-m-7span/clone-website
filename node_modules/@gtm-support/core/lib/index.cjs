"use strict";var b=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var O=(r,t)=>{for(var a in t)b(r,a,{get:t[a],enumerable:!0})},w=(r,t,a,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of f(t))!h.call(r,o)&&o!==a&&b(r,o,{get:()=>t[o],enumerable:!(e=L(t,o))||e.enumerable});return r};var E=r=>w(b({},"__esModule",{value:!0}),r);var S={};O(S,{GTM_ID_PATTERN:()=>l,GtmSupport:()=>y,assertIsGtmId:()=>n,hasScript:()=>m,loadScript:()=>s});module.exports=E(S);var l=/^GTM-[0-9A-Z]+$/;function n(r){if(typeof r!="string"||!l.test(r)){let t=String(r).toUpperCase().replace(/.*-|[^0-9A-Z]/g,""),a=t.length===0?"":` Did you mean 'GTM-${t}'?`;throw new Error(`'${r}' is not a valid GTM-ID (${l}).${a}`)}}function i(r,t="dataLayer"){return r[t]||(r[t]=[]),r[t]}function s(r,t){let a=document,e=a.createElement("script"),o=D=>{t.onReady?.({id:r,script:e}),e.removeEventListener("load",o)};e.addEventListener("load",o);let p=t.dataLayerName??"dataLayer";if(i(window,p).push({event:"gtm.js","gtm.start":new Date().getTime()}),!r)return e;e.async=!t.defer,e.defer=!!(t.defer||t.compatibility),t.nonce&&(e.nonce=t.nonce),t.scriptType&&(e.type=t.scriptType);let c=new URLSearchParams({id:r,...t.dataLayerName?{l:t.dataLayerName}:{},...t.queryParams??{}}),d=t.source??"https://www.googletagmanager.com/gtm.js";e.src=`${d}?${c}`;let u=t.parentElement??a.body;if(typeof u?.appendChild!="function")throw new Error("parentElement must be a DOM element");return u.appendChild(e),e}function m(r="https://www.googletagmanager.com/gtm.js"){return Array.from(document.getElementsByTagName("script")).some(t=>t.src.includes(r))}var y=class{id;options;scriptElements=[];constructor(t){if(Array.isArray(t.id))for(let a of t.id)typeof a=="string"?n(a):n(a.id);else n(t.id);this.id=t.id,this.options={enabled:!0,debug:!1,loadScript:!0,defer:!1,compatibility:!1,dataLayerName:"dataLayer",...t},delete this.options.id}isInBrowserContext=()=>typeof window<"u";enabled(){return this.options.enabled??!0}enable(t=!0,a){if(this.options.enabled=t,this.isInBrowserContext()&&t&&!m(a)&&this.options.loadScript)if(Array.isArray(this.id))this.id.forEach(e=>{let o;typeof e=="string"?o=s(e,{...this.options}):o=s(e.id,{...this.options,queryParams:e.queryParams}),this.scriptElements.push(o)});else{let e=s(this.id,{...this.options});this.scriptElements.push(e)}}debugEnabled(){return this.options.debug??!1}debug(t){this.options.debug=t}dataLayer(){return this.isInBrowserContext()&&this.options.enabled?i(window,this.options.dataLayerName):!1}trackView(t,a,e={}){let o=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${o?"":"(disabled)"}]: Dispatching TrackView`,{screenName:t,path:a}),o&&i(window,this.options.dataLayerName).push({...e,event:this.options.trackViewEventProperty??"content-view","content-name":a,"content-view-name":t})}trackEvent({event:t,category:a=null,action:e=null,label:o=null,value:p=null,noninteraction:g=!1,...c}={}){let d=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${d?"":"(disabled)"}]: Dispatching event`,{event:t,category:a,action:e,label:o,value:p,...c}),d&&i(window,this.options.dataLayerName).push({event:t??"interaction",target:a,action:e,"target-properties":o,value:p,"interaction-type":g,...c})}push(t){let a=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${a?"":"(disabled)"}]: Dispatching event`,t),a&&i(window,this.options.dataLayerName).push(t)}};0&&(module.exports={GTM_ID_PATTERN,GtmSupport,assertIsGtmId,hasScript,loadScript});
//# sourceMappingURL=index.cjs.map