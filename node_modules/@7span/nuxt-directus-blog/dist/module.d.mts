import { defineNuxtModule, createResolver, addComponentsDir, addImportsDir, addComponent } from '@nuxt/kit';

var module = defineNuxtModule({
  meta: {
    name: "@7span/nuxt-directus-blog",
    configKey: "directusBlog"
  },
  defaults: {},
  setup(options, nuxt) {
    const { resolve } = createResolver(import.meta.url);
    options.baseUrl = options.baseUrl || "https://products.7span.in";
    options.assetsBaseUrl = options.assetsBaseUrl || "https://7span-product.b-cdn.net";
    options.collection = options.collection || "bg_articles";
    nuxt.options.runtimeConfig.public.blog = options;
    addComponentsDir({
      path: resolve("runtime/components/atoms"),
      prefix: "DbArticle"
    });
    addImportsDir(resolve("runtime/composables"));
    addComponent({
      name: "DbTags",
      filePath: resolve("runtime/components/sections/tags.vue")
    });
    addComponent({
      name: "DbArticleCard",
      filePath: resolve("runtime/components/article-card.vue")
    });
    addComponent({
      name: "DbArticle",
      filePath: resolve("runtime/components/article.vue")
    });
  }
});

export { module as default };
