import { useHead, useRuntimeConfig } from "#imports";
export function useGtagConsent(hasConsent) {
  const { gtag: { id } } = useRuntimeConfig().public;
  if (process.server || !("dataLayer" in window))
    return;
  const isInitialized = window.dataLayer.length > 2;
  if (hasConsent) {
    if (!isInitialized) {
      useHead({
        script: [{ src: `https://www.googletagmanager.com/gtag/js?id=${id}` }]
      });
    } else {
      disableGtag(false, id);
    }
    return;
  }
  disableGtag(true, id);
}
function disableGtag(value, id) {
  window[`ga-disable-${id}`] = value;
}
